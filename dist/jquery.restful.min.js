/*!
 * jQuery restful plugin v1.0.3
 * https://github.com/myspace-nu
 *
 * Copyright 2018 Johan Johansson
 * Released under the MIT license
 */

!function(c){c.fn.serializeObject=function(){var t={},e=this.serializeArray();return c.each(e,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},c.fn.restful=function(t){var i=c.extend({url:null,method:"POST",onComplete:function(){},onSuccess:function(){},onError:function(){},dataType:"json",defaultValue:null},t);i.url&&(i.url=i.url.replace(/\/+$/,"")),this.each(function(){"form"==this.tagName.toLowerCase()?c(this).submit(function(t){t.preventDefault();var e=c(this).serializeObject(),a=c(this).attr("action");!a.match(/^(\w{3,5}\:)?\/+/)&&i.url&&(a=i.url+"/"+a.replace(/^\/+/,""));var r=a.match(/{+\:?\w+}+/g);for(var n in r){var o=r[n].match(/\w+/);a=a.replace(r[n],e[o[0]]||e[o[0].toLowerCase()]||i.defaultValue),delete e[o[0]]}var s={url:a,type:c(this).attr("method")||i.method,context:this,success:function(t){i.onSuccess.call(this,t)},error:function(t){i.onError.call(this,t)},complete:function(t){i.onComplete.call(this,t)}};"get"==s.type.toLowerCase()?s.url+="?"+c.param(e):"json"==i.dataType.toLowerCase()?(s.contentType="application/json; charset=utf-8",s.dataType="json",s.data=JSON.stringify(e)):s.data=e,c.ajax(s)}):c(this).click(function(t){t.preventDefault();var e=c(this).data(),a=c(this).attr("href");!a.match(/^(\w{3,5}\:)?\/+/)&&i.url&&(a=i.url+"/"+a.replace(/^\/+/,""));var r=a.match(/{+\:?\w+}+/g);for(var n in r){var o=r[n].match(/\w+/);a=a.replace(r[n],e[o[0]]||e[o[0].toLowerCase()]||i.defaultValue),delete e[o[0].toLowerCase()]}var s={url:a,type:i.method,context:this,success:function(t){i.onSuccess.call(this,t)},error:function(t){i.onError.call(this,t)},complete:function(t){i.onComplete.call(this,t)}};"get"==s.type.toLowerCase()?s.url+="?"+c.param(e):"json"==i.dataType.toLowerCase()?(s.contentType="application/json; charset=utf-8",s.dataType="json",s.data=JSON.stringify(e)):s.data=e,c.ajax(s)})})}}(jQuery);